cmake_minimum_required(VERSION 2.8)

#set(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)
set(CMAKE_MODULE_PATH ../cmake)
project(CNAtestCUDA)

find_package( CUDA REQUIRED)
message(STATUS "Cuda cublas libraries  : ${CUDA_CUBLAS_LIBRARIES}")

set(CUDA_PROPAGATE_HOST_FLAGS OFF)

set(
    CUDA_NVCC_FLAGS
    ${CUDA_NVCC_FLAGS};
    -std=c++11 -Xcompiler -fPIC  -O3 -arch=compute_50 
)



include_directories(${CUDA_INCLUDE} ${CUDA_INCLUDE_DIRS})
set(LINK_DIRECTORIES
${CUDA_LIBRARIES}
)
cuda_compile(CNAtestCUDA_O test.cu)
set(CNALIBNAME cnalib)
cuda_add_library(${CNALIBNAME} SHARED test.h ${CNAtestCUDA_O})
target_link_libraries(${CNALIBNAME} ${CUDA_LIBRARIES} )
install(TARGETS ${CNALIBNAME}  DESTINATION ./)
